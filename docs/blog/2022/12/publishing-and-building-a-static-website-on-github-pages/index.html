<!DOCTYPE html>
<html lang="en">
<head>
  <title>
Publishing and building a static website on GitHub Pages - Kevin.Gimbel.Dev/Blog
</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link id="favicon" rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¥¸</text></svg>">
  <style>:root {
  --color-bg: hsl(279, 19%, 93%);
  --color-fg: #000;
  --color-contrast-fg: #000;
  --color-contrast-bg: #000;

  --stack-spacing: 2rem;
  --spacing: 2rem;

  --color-accent-1: hsl(100, 75%, 90%);
  --color-accent-1-contrast: hsl(100, 20%, 50%);
  --color-accent-2: hsl(200, 75%, 90%);
  --color-accent-2-contrast: hsl(200, 20%, 50%);
  --color-accent-3: hsl(300, 75%, 90%);
  --color-accent-3-contrast: hsl(300, 20%, 50%);
  --color-accent-4: hsl(400, 75%, 90%);
  --color-accent-4-contrast: hsl(400, 20%, 50%);
  --color-accent-5: hsl(255, 75%, 90%);
  --color-accent-5-contrast: hsl(255, 20%, 50%);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font: 14px/1.4 ui-monospace,
    "Cascadia Mono", "Segoe UI Mono",
    "Ubuntu Mono",
    "Roboto Mono",
    Menlo, Monaco, Consolas,
    monospace;
  background: cornsilk;
  color: #000;
}

h1 {
  font-size: 2em;
}

h2,
h3 {
  --color-fg: var(--color-contrast-fg);
  text-shadow: .02em .02em 0 var(--color-bg), .03em .03em 0 var(--color-contrast-fg);
}

hr {
  max-width: 80%;
  margin: 0 auto;
  border: none;
  background: var(--color-fg);
  height: 0.05em;
}

.stack *+* {
  margin-top: var(--stack-spacing, 2rem);
}

a {
  color: hotpink;
}

a:hover {
  border-bottom: none;
  text-decoration: none;
}

.a-blank,
.a-blank:visited {
  text-decoration: none;
}

.a-blank:hover,
.a-blank:focus {
  border-bottom: .15em solid currentColor;
  font-size: 100%;
  letter-spacing: 0em;
}

.a-splash {
  color: var(--color-bg);
  background: var(--color-fg);
  border-radius: 65% 72% 53% 41%;
  padding: .25em;
}

/* Accent colors and styles */
.fg-accent-1 {
  --color-fg: var(--color-accent-1, hsl(100, 75%, 90%));
}

.fg-accent-2 {
  --color-fg: var(--color-accent-2, hsl(200, 75%, 90%));
}

.fg-accent-3 {
  --color-fg: var(--color-accent-3, hsl(300, 75%, 90%));
}

.fg-accent-4 {
  --color-fg: var(--color-accent-4, hsl(400, 75%, 90%));
}

[class*="fg-accent"] {
  color: var(--color-fg);
  font-weight: bold;
}

.bg-accent-1 {
  --color-contrast-fg: var(--color-accent-1-contrast, #000);
  --color-bg: var(--color-accent-1, hsl(100, 75%, 90%));
}

.bg-accent-2 {
  --color-contrast-fg: var(--color-accent-2-contrast, #000);
  --color-bg: var(--color-accent-2, hsl(200, 75%, 90%));
}

.bg-accent-3 {
  --color-contrast-fg: var(--color-accent-3-contrast, #000);
  --color-bg: var(--color-accent-3, hsl(300, 75%, 90%));
}

.bg-accent-4 {
  --color-contrast-fg: var(--color-accent-4-contrast, #000);
  --color-bg: var(--color-accent-4, hsl(400, 75%, 90%));
}

.bg-accent-5 {
  --color-contrast-fg: var(--color-accent-5-contrast, #fff);
  --color-bg: var(--color-accent-5, #000);
}

[class*="bg-accent"] {
  background: var(--color-bg, #000);
  color: var(--color-fg, #fff);
}

ul {
  list-style: none;
  margin-left: var(--stack-spacing);
}

ul li::before {
  content: "âœ¦";
  color: var(--color-contrast-fg, #000);
  display: inline;
  width: 1em;
  margin-left: -1.25em;
  padding-right: .5em;
}

.grid {
  display: grid;
}



.main-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-column-gap: 1em;
  overflow-x: hidden;
  min-height: 100vh;
}

.gr-1 {
  grid-row: 1;
}

.gr-2 {
  grid-row: 2;
}

.gr-auto {
  grid-row: auto;
}

.gc-full {
  grid-column-start: 1;
  grid-column-end: 12;
}

.gc-8-12 {
  grid-column-start: 8;
  grid-column-end: 12;
}

.gc-1-7 {
  grid-column-start: 1;
  grid-column-end: 7;
}

.d-grid {
  display: grid;
  grid-template-columns: repeat(var(--grid-columns, 3), 1fr);
  grid-gap: var(--stack-spacing, 2rem);
}

ul li {
  margin-top: var(--stack-spacing, 1rem);
}

/* .c-skill-list {} */
.c-skill-list__item {
  padding: 1rem;
  font-size: .75em;
}

.about {
  grid-column-start: 5;
  grid-column-end: 12;
  grid-row: 2;
}

.c-full-width {
  width: 100vw;
}

.c-full-height {
  min-height: 100vh;
}

hgroup {
  margin-bottom: calc(var(--stack-spacing, 2rem) * 2);
}

.c-svg-background {
  width: 100%;
  width: fit-content;
  max-width: 40vw;
  position: relative;
  padding: var(--spacing, 2rem);
  display: block;
  color: var(--color-fg, #000);
  display: inline-grid;
  grid-template-areas: "a";
}

.c-svg-background>.background,
.c-svg-background>.content {
  grid-area: a;
  grid-row: 1;
  grid-column: 1;
}

.c-svg-background>.content {
  padding: 0 0 1.5em 1em;
}

.c-svg-background>.background {
  width: 110%;
  height: 110%;
  margin-left: -5%;
  margin-top: -5%;
}

.f-ultra>* {
  font-size: 2.75em;
}

.f-heading-big {
  font-size: 3em;
  color: var(--color-fg, #000);
}

section {
  padding: var(--spacing, 2rem);
}

@media all and (max-width: 2000px) {
  .about {
    grid-column-start: 3;
    grid-column-end: 13;
    max-width: 60vw;
    min-width: 60rem;
  }
}

@media all and (max-width: 1200px) {
  body {
    font-size: 10px;
  }

  section {
    padding: 2rem;
  }

  .start>* {
    max-width: 100%;
  }

  .about,
  .avatar {
    width: 100%;
    min-width: 100%;
  }

  .bg-accent-3 {
    text-shadow: none;
  }

  .about {
    grid-column-start: 1;
    grid-column-end: 13;
    background: var(--color-contrast-bg);
  }

  .about .background {
    display: none;
  }

  .c-skill-list {
    grid-template-columns: 1fr;
  }

  .c-svg-background {
    max-width: 100%;
  }

  .grid {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
  }

  .grid>* {
    grid-column: auto;
    grid-row: auto;
  }
}

.single-page {
  font-size: .75em;
}

.article-list {
  max-width: 75rem;
  margin: 0 auto;
}

.article-list__item>h2 {
  text-shadow: none;
}

.article-list__more-link {
  display: inline-block;
  margin-top: var(--spacing);
}

.article-list__item {
  margin: calc(var(--spacing) * 2) 0;
  background: #fff;
  padding: calc(var(--spacing) * 2)
}</style>
  
  
  <style>.article-page {
    --color-code-bg: #f1f1f1;
    --color-code-fg: #333;
}

.article-page,
.article-list {
    background: #fff;
    padding: 4rem;
    max-width: 75rem;
    margin: 0 auto;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

.article-page h2,
.article-page h3 {
    text-shadow: none;
}

.article-page p code {
    background: var(--color-code-bg);
    color: var(--color-code-fg);
    padding: .15em .25em;
}

.wp-smiley {
    height: 0.75em !important;
    width: 0.75em !important;
    display: inline;
}

figure img {
    margin: 0 auto;
    max-width: 100%;
    height: auto;
}

figure {
    background: var(--color-accent-2, #ddd);
    justify-content: center;
    display: flex;
    flex-direction: column;
    padding-top: 2rem;
}

figcaption {
    font-size: .65em;
    background: var(--color-accent-2-contrast, #000);
    color: #fff;
}

pre,
.wp-block-code,
.wp-block-preformatted {
    background: #f1f1f1;
    color: #000;
    padding: var(--spacing);
    margin-left: calc(var(--spacing) * -2);
    width: calc(100% + calc(4 * var(--spacing)));
    overflow: auto;
    font-size: 90%;
    border-left: .25em solid #ddd;
    border-top: .25em solid #ddd;
}

.article__og-box {
    font-size: 1rem;
    border: .25em solid #ddd;
    background: var(--color-accent-2);
    color: var(--color-accent-2-contrast);
    padding: calc(var(--spacing) / 2);
}</style>
  
  
  
<link rel="canonical" href="https://kevingimbel.de/blog/2022/12/publishing-and-building-a-static-website-on-github-pages/" />

</head>
<body>
  <main class="main-grid">
  

<section class="[ f-ultra bg-accent-2 stack ] [ gr-auto gc-full ] [ c-full-width ] single-page article-page">
    <nav><a href="/ops/">&lt;&lt; Home</a> | <a href="/blog/">Blog &gt;&gt;</a></nav>

    <div class="article__og-box">
        <p><i>"Publishing and building a static website on GitHub Pages"</i> was originally published on <a href="https://kevingimbel.de/blog/2022/12/publishing-and-building-a-static-website-on-github-pages/" target="_blank" rel="nofollow" title="Read 'Publishing and building a static website on GitHub Pages' on kevingimbel.de">kevingimbel.de</a>.</p>
    </div>
    <hr />
    <div class="content">
        <h1>Publishing and building a static website on GitHub Pages</h1>
        
<p>A week ago or so I finally launched a small website I&#8217;ve been working on for quite some time: <a href="https://kevin.gimbel.dev/ops/">kevin.gimbel.dev/ops</a> &#8211; it&#8217;s a colourful static website showing some of the technologies I&#8217;ve worked with in the past years since I began doing DevOps full time.</p>



<figure class="wp-block-image alignwide size-large"><img decoding="async" loading="lazy" width="1024" height="666" src="https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.46.05-1024x666.png" alt="" class="wp-image-94" srcset="https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.46.05-1024x666.png 1024w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.46.05-300x195.png 300w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.46.05-768x499.png 768w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.46.05-1536x999.png 1536w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.46.05-2048x1332.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>The website is built with <a href="https://11ty.dev/">11ty</a> and published with <a href="https://pages.github.com/">GitHub Pages</a>. </p>



<h2 class="wp-block-heading">Overview</h2>



<p>Here&#8217;s what we do:</p>



<ol>
<li>Build the code using 11ty</li>



<li>Publish the generated site to a <a href="https://github.com/KevinGimbel/kevin.gimbel.dev/tree/gh-pages">gh-pages branch</a></li>
</ol>



<p>To do this we need to first set our GitHub repository to deploy from a GitHub action. This is a new feature and currently in Beta.</p>



<figure class="wp-block-image alignwide size-large"><img decoding="async" loading="lazy" width="1024" height="532" src="https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.38.00-1024x532.png" alt="" class="wp-image-93" srcset="https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.38.00-1024x532.png 1024w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.38.00-300x156.png 300w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.38.00-768x399.png 768w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.38.00-1536x798.png 1536w, https://kevingimbel.de/wp-content/uploads/2022/12/Screenshot-2022-12-02-at-13.38.00-2048x1065.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption class="wp-element-caption">GitHub Pages settings screen</figcaption></figure>



<p>With this setting enabled our GitHub action is used to deploy the static site.</p>



<p>The building is then done in a <a href="https://github.com/KevinGimbel/kevin.gimbel.dev/blob/main/.github/workflows/build-eleventy.yml">GitHub action</a>. Here&#8217;s the code</p>



<pre class="wp-block-code"><code>name: Build eleventy site

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - run: npm ci

      - run: npm run build

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        if: ${{ github.ref == 'refs/heads/main' }}
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./docs</code></pre>



<p>With this config we do the following:</p>



<ol>
<li>Checkout the code using the standard actions/checkout@v3 action from GitHub</li>



<li>Setup NodeJS with the actions/setup-node@v3 action, we specify 18 as version</li>



<li>Run <code><strong>npm ci</strong></code> to install dependencies</li>



<li>Run <code><strong>npm run build</strong></code> to execute the <a href="https://github.com/KevinGimbel/kevin.gimbel.dev/blob/1d66b873955803054b2a85f7add3c8d2430a0243/package.json#L6">build script defined in the package.json</a></li>



<li>And finally we use <a href="https://github.com/peaceiris/actions-gh-pages">peaceiris/actions-gh-pages@v3</a> to deploy the compiled code to the gh-pages branch.</li>
</ol>



<p>This action works like a charm and builds the site in no time! Previously I had build the static site on my machine and setup GitHub pages to serve files from the <code><strong>docs</strong></code> folder. This works as well, but I didn&#8217;t want to run the compile commands by hand all the time.</p>



<p>By default all GitHub Pages run through Jekyll, which was also a waste of resources because this step did nothing. By providing my own build script that actually does something the default Jekyll one stopped running as well. </p>



<p></p>

    </div>
</section>


  <section id="footer" class="[ f-ultra stack ] [ gr-auto gc-full bg-accent] [ c-full-width ]" style="--color-bg: #000; --color-fg: #fff;">
    <div class="content">
      <p>Made with <a class="a-splash" href="https://11ty.dev/">11ty</a> and lots of fun. <a href="/imprint">Imprint</a></p>
    </div>
  </section>
</main>
</body>
<script>document.addEventListener('DOMContentLoaded', function () {
  let favicon_txt = `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>%EMOJI%</text></svg>`
  let favicon_el = document.head.querySelector('#favicon');
  let sections = Array.from(document.querySelectorAll('section[data-icon]'));
  let last_active_section = null;
  let YEAR_NOW = new Date().getFullYear().toFixed(0);
  let years_working = document.querySelector(".js-years-working");
  let all_time_since = document.querySelectorAll(".js-time-since");

  function set_favicon(emoji) {
    let txt = favicon_txt.replace('%EMOJI%', emoji);
    favicon_el.setAttribute('href', txt);
  }

  window.addEventListener('scroll', function (event) {
    let sections_in_view = sections.filter((section) => section.offsetTop <= window.pageYOffset);
    let active_section = sections_in_view[sections_in_view.length - 1];
    if (last_active_section != active_section) {
      last_active_section = active_section;
      set_favicon(active_section.dataset.icon);
    }
  });

  all_time_since.forEach((element, key) => {
    let year = element.dataset.year;

    if (year) {
      try {
        let year_num = parseInt(year);
        element.textContent = YEAR_NOW - year_num;
      } catch (err) {
        console.log("Error calculating year: ", err);
      }
    }
  })

  if (years_working) {
    years_working.textContent = YEAR_NOW - 2009;
  }
});
</script>
</html>
